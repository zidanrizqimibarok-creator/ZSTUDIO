<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>BIZET OS v20.0 CIPHER EDITION</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-database-compat.js"></script>
    <style>
        :root { --red: #ff0000; --dark: #000; --neon: 0 0 30px rgba(255, 0, 0, 0.7); }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; }

        /* BOOTING CLEAN */
        #boot { position: fixed; inset: 0; background: #000; z-index: 999999; display: flex; justify-content: center; align-items: center; }
        .logo { font-size: 8rem; font-weight: 900; color: var(--red); letter-spacing: 25px; text-shadow: var(--neon); animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.5; transform: scale(0.95); } 50% { opacity: 1; transform: scale(1); } }

        /* DASHBOARD */
        #home-layer { position: absolute; inset: 0; z-index: 10; display: flex; flex-direction: column; justify-content: center; padding: 0 8%; transition: 1s; }
        .clock { font-size: 10rem; font-weight: 100; margin: 0; }
        .welcome { font-size: 1.5rem; letter-spacing: 10px; color: #444; text-transform: uppercase; }

        /* WEB LAYER */
        #web-layer { position: absolute; inset: 0; z-index: 5; background: #000; display: none; }
        iframe { width: 100%; height: 100%; border: none; }

        /* FLOATING UI (PINTASAN) */
        #floating-ui {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            z-index: 99999; display: flex; gap: 15px; background: rgba(10,10,10,0.95);
            padding: 12px 30px; border-radius: 50px; border: 1px solid #333; backdrop-filter: blur(20px);
        }
        .btn-app { width: 120px; height: 65px; background: #1a1a1a; border-radius: 18px; border: 1px solid #444; color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; cursor: pointer; transition: 0.3s; font-size: 0.75rem; letter-spacing: 1px; }
        .btn-app:hover { background: var(--red); box-shadow: var(--neon); border-color: #fff; }

        /* PAIRING CODE OVERLAY (PENGGANTI QR) */
        #pairing-box {
            position: fixed; top: 30px; right: 30px; background: rgba(20,20,20,0.9);
            padding: 20px; border-radius: 20px; border: 1px solid #444; z-index: 100000;
            text-align: center; backdrop-filter: blur(10px);
        }
        .code-text { font-family: monospace; font-size: 2rem; color: var(--red); font-weight: bold; letter-spacing: 5px; margin: 10px 0; }

        /* SHUTDOWN */
        .off-anim { animation: off 0.6s forwards; }
        @keyframes off { 0% { transform: scale(1); } 50% { transform: scale(1.5, 0.002); filter: brightness(10); } 100% { opacity: 0; } }
    </style>
</head>
<body>

    <div id="boot"><div class="logo">BIZET</div></div>

    <div id="pairing-box">
        <div style="font-size: 0.7rem; color: #888; letter-spacing: 2px;">CONNECT CODE:</div>
        <div class="code-text" id="sync-code">....</div>
        <div id="conn-status" style="font-size: 0.6rem; color: #444;">WAITING...</div>
    </div>

    <div id="home-layer">
        <p class="welcome">Apex Eternal v20</p>
        <h1 class="clock" id="cl">00:00</h1>
    </div>

    <div id="web-layer"><iframe id="ifr" src=""></iframe></div>

    <div id="floating-ui">
        <div class="btn-app" onclick="openA('https://www.tiktok.com')">TIKTOK</div>
        <div class="btn-app" onclick="openA('https://m.youtube.com')">YOUTUBE</div>
        <div class="btn-app" onclick="openA('https://poki.com')">GAMES</div>
        <div class="btn-app" style="border-color: red;" onclick="off()">OFF</div>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://bizet-tv-default-rtdb.firebaseio.com" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 1. GENERATE PAIRING CODE (Contoh: BZ-7788)
        const myPairCode = "BZ-" + Math.floor(1000 + Math.random() * 9000);
        document.getElementById('sync-code').innerText = myPairCode;

        // 2. SISTEM JAM
        function clock() {
            const d = new Date();
            document.getElementById('cl').innerText = d.getHours().toString().padStart(2,'0') + ":" + d.getMinutes().toString().padStart(2,'0');
        }
        setInterval(clock, 1000); clock();

        // 3. BOOTING
        setTimeout(() => {
            const b = document.getElementById('boot');
            b.style.transition = '2s'; b.style.opacity = '0';
            setTimeout(() => b.style.display = 'none', 2000);
        }, 5000);

        // 4. NAVIGATION
        function openA(url) {
            document.getElementById('ifr').src = url;
            document.getElementById('web-layer').style.display = 'block';
            document.getElementById('home-layer').style.opacity = '0';
        }

        function off() {
            document.body.classList.add('off-anim');
            setTimeout(() => { document.body.innerHTML = ''; }, 600);
        }

        // 5. RECEIVER (Hanya jalan jika kode di Remote HP COCOK)
        db.ref('BIZET_GLOBAL_SYNC').on('value', (snap) => {
            const data = snap.val();
            if(!data) return;

            // CEK APAKAH KODE DARI HP SAMA DENGAN DI TV
            if(data.pairKey === myPairCode) {
                document.getElementById('conn-status').innerText = "CONNECTED";
                document.getElementById('conn-status').style.color = "lime";

                if(data.type === 'nav') {
                    if(data.val === 'UP') window.scrollBy(0, -300);
                    if(data.val === 'DOWN') window.scrollBy(0, 300);
                    if(data.val === 'HOME') {
                        document.getElementById('web-layer').style.display = 'none';
                        document.getElementById('ifr').src = '';
                        document.getElementById('home-layer').style.opacity = '1';
                    }
                }
                if(data.type === 'url') openA(data.val);
                
                // Clear trigger setelah diproses
                db.ref('BIZET_GLOBAL_SYNC').set(null);
            }
        });
    </script>
</body>
</html>
